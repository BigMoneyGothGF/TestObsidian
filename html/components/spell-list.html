<div class="obsidian-spell-filter">
	<div class="obsidian-input-search-container">
		<input type="text" class="obsidian-input-search"
		       placeholder="{{localize 'OBSIDIAN.SpellName'}}...">
		<i class="fas fa-search"></i>
		<span class="obsidian-clear-search">&times;</span>
	</div>
	<ul class="obsidian-tab-bar">
		{{#each (range 0 9)}}
			{{#if (notEmpty (filter ../spells 'data.level.value' this))}}
				<li class="obsidian-sub-tab obsidian-spell-level-tab">{{spellLevelFormat this}}</li>
			{{/if}}
		{{/each}}
	</ul>
</div>
<div class="obsidian-spell-list">
	{{#each spells}}
		<details>
			<summary>
				<div class="obsidian-col-icon">
					<i class="obsidian-spell-school obsidian-spell-school-{{data.school.value}}"></i>
				</div>
				<div class="obsidian-col-spell">
					<div class="obsidian-table-text">{{name}}</div>
					{{#if data.concentration.value}}
						<div class="obsidian-icon obsidian-icon-concentration"></div>
					{{/if}}
					{{#if data.ritual.value}}
						<div class="obsidian-icon obsidian-icon-ritual"></div>
					{{/if}}
					<div class="obsidian-table-sub-text">
						({{spellLevelFormat data.level.value cantrip=true}})
					</div>
				</div>
				<button type="button" class="obsidian-btn-outline {{btnClass}}">{{localize ../btn}}</button>
				<i class="fas fa-angle-down"></i>
			</summary>
			<div class="obsidian-spell-card">
				<div class="obsidian-spell-card-header">
					<h3>
						{{#if (expr '===' data.level.value 0)}}
							{{i18n-join 'OBSIDIAN.SpellSchool-' data.school.value}}
							{{spellLevelFormat data.level.value cantrip=true}}
						{{else}}
							{{spellLevelFormat data.level.value level=true}}
							{{i18n-join 'OBSIDIAN.SpellSchool-' data.school.value}}
						{{/if}}
					</h3>
					<div class="obsidian-spell-card-header-row">
						<div class="obsidian-spell-card-header-key">{{localize 'OBSIDIAN.CastTime'}}:</div>
						<div class="obsidian-spell-card-header-value">
							{{flags.obsidian.time.n}}
							{{lc (i18n-join 'OBSIDIAN.CastTime-' flags.obsidian.time.type)}}
							{{~#if (expr '===' flags.obsidian.time.type 'react')~}}
								, {{flags.obsidian.time.react}}
							{{/if}}
						</div>
					</div>
					<div class="obsidian-spell-card-header-row">
						<div class="obsidian-spell-card-header-key">{{localize 'OBSIDIAN.Range'}}:</div>
						<div class="obsidian-spell-card-header-value">
							{{#if (expr '||'
									      (expr '===' flags.obsidian.range.type 'short')
									      (expr '===' flags.obsidian.range.type 'long'))}}
								{{flags.obsidian.range.n}}
								<span class="obsidian-table-unit">
									{{i18n-join 'OBSIDIAN.SpellRangeAbbr-' flags.obsidian.range.type}}
								</span>
							{{else}}
								{{i18n-join 'OBSIDIAN.SpellRange-' flags.obsidian.range.type}}
							{{/if}}
						</div>
					</div>
					<div class="obsidian-spell-card-header-row">
						<div class="obsidian-spell-card-header-key">{{localize 'OBSIDIAN.Components'}}:</div>
						<div class="obsidian-spell-card-header-value">
							{{flags.obsidian.components.display}}
							{{#if flags.obsidian.components.m}}
								<span class="obsidian-table-sub-text">({{data.materials.value}})</span>
							{{/if}}
						</div>
					</div>
					<div class="obsidian-spell-card-header-row">
						<div class="obsidian-spell-card-header-key">{{localize 'OBSIDIAN.Duration'}}:</div>
						<div class="obsidian-spell-card-header-value">
							{{#if data.concentration.value}}
								{{localize 'OBSIDIAN.Concentration'}},
								{{localize 'OBSIDIAN.UpTo'}} {{format-spell-duration this}}
							{{else}}
								{{format-spell-duration this}}
							{{/if}}
						</div>
					</div>
				</div>
				<div class="obsidian-spell-card-body">{{{data.description.value}}}</div>
			</div>
		</details>
	{{/each}}
</div>
