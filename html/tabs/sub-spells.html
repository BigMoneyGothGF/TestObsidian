<div class="obsidian-tab-contents tab" data-group="spells" data-tab="{{level}}">
	{{#each (range 0 9)}}
		{{#if (expr '||' (expr '&&' (expr '===' 'all' ../level) (has-spells ../entity this)) (expr '===' ../level this))}}
			<h3>
				{{spellLevelFormat this cantrip=true level=true}}
				<div class="obsidian-spells-slots-pact">
					{{#if (expr '===' ../data.spells.pact.level this)}}
						<div class="obsidian-spells-pact">
							{{format-slots ../data.spells.pact 'pact'}}
							<span>{{localize 'OBSIDIAN.Pact'}}</span>
						</div>
					{{/if}}
					{{#with (lookup ../data.spells (expr '+' 'spell' this))}}
					{{#if (expr '>' max 0)}}
						<div class="obsidian-spells-slots">
							{{format-slots this ../this}}
							<span>{{localize 'OBSIDIAN.Slots'}}</span>
						</div>
					{{/if}}
					{{/with}}
				</div>
			</h3>
			<div class="obsidian-table">
				<div class="obsidian-thead">
					<div class="obsidian-col-icon"></div>
					<div class="obsidian-col-spell">{{localize 'OBSIDIAN.Name'}}</div>
					<div class="obsidian-col-time">{{localize 'OBSIDIAN.Time'}}</div>
					<div class="obsidian-col-range">{{localize 'OBSIDIAN.Range'}}</div>
					<div class="obsidian-col-dc">{{localize 'OBSIDIAN.HitDC'}}</div>
					<div class="obsidian-col-damage">{{localize 'OBSIDIAN.Damage'}}</div>
					<div class="obsidian-col-notes">{{localize 'OBSIDIAN.Notes'}}</div>
					<div class="obsidian-col-icon"></div>
				</div>
				<div class="obsidian-tbody">
					{{#with (lookup ../entity.spellbook this)}}
					{{#each spells}}
						<div class="obsidian-tr">
							<div class="obsidian-col-icon">
								<i class="obsidian-spell-school obsidian-spell-school-{{data.school.value}}"></i>
							</div>
							<div class="obsidian-col-spell">
								<div class="obsidian-table-text rollable">{{name}}</div>
								<div class="obsidian-table-sub-text">
									{{flags.obsidian.source.display}}
									{{#if flags.obsidian.components.display}}
										&bull; {{flags.obsidian.components.display}}
									{{/if}}
								</div>
							</div>
							<div class="obsidian-col-time"></div>
							<div class="obsidian-col-range"></div>
							<div class="obsidian-col-dc"></div>
							<div class="obsidian-col-damage"></div>
							<div class="obsidian-col-notes"></div>
							<div class="obsidian-col-icon">
								<a title="{{localize 'OBSIDIAN.EditSpell'}}" class="obsidian-edit"
								   data-spell-id="{{id}}">
									<i class="fas fa-edit"></i>
								</a>
							</div>
						</div>
					{{/each}}
					{{/with}}
				</div>
			</div>
		{{/if}}
	{{/each}}
</div>
