<form class="obsidian obsidian-form-bare" autocomplete="off">
	<label class="obsidian-label-lg">{{localize 'OBSIDIAN.Spellcasting'}}</label>
	{{#each entity.flags.obsidian.classes as |class id|}}
		<div class="obsidian-form-row obsidian-inline">
			<div class="obsidian-fullwidth">
				<span class="obsidian-constant">
					{{~#if (expr '===' class.name 'custom')~}}
						{{class.custom}}
					{{else}}
						{{i18n-join 'OBSIDIAN.Class-' class.name}}
					{{~/if~}}
				</span>
				<select name="flags.obsidian.classes.{{id}}.spell">
					{{#select class.spell}}
						<option value="">&mdash;</option>
						{{#each ../data.abilities}}
							<option value="{{@key}}">{{i18n-join 'OBSIDIAN.Ability-' @key}}</option>
						{{/each}}
					{{/select}}
				</select>
				<select name="flags.obsidian.classes.{{id}}.progression">
					{{#select class.progression}}
						<option value="">&mdash;</option>
						{{#each ../ObsidianRules.SPELL_PROGRESSION}}
							<option value="{{this}}">{{i18n-join 'OBSIDIAN.SpellProg-' this}}</option>
						{{/each}}
					{{/select}}
				</select>
				<select name="flags.obsidian.classes.{{id}}.preparation">
					{{#select class.preparation}}
						<option value="">&mdash;</option>
						{{#each ../ObsidianRules.SPELL_PREP}}
							<option value="{{this}}">{{i18n-join 'OBSIDIAN.SpellPrep-' this}}</option>
						{{/each}}
					{{/select}}
				</select>
				<select name="flags.obsidian.classes.{{id}}.rituals">
					{{#select class.rituals}}
						<option value="">&mdash;</option>
						{{#each ../ObsidianRules.SPELL_RITUALS}}
							<option value="{{this}}">{{i18n-join 'OBSIDIAN.RitualCast-' this}}</option>
						{{/each}}
					{{/select}}
				</select>
			</div>
		</div>
	{{/each}}
	<label class="obsidian-label-lg">{{localize 'OBSIDIAN.SlotOverride'}}</label>
	<div class="obsidian-form-row obsidian-inline obsidian-align-labels">
		{{#each (range 1 5)}}
			<label class="obsidian-inline">
				<input type="text" name="flags.obsidian.spells.slots.{{this}}"
				       value="{{lookup ../entity.flags.obsidian.spells.slots this}}"
				       class="obsidian-input-compact obsidian-input-num obsidian-input-num-sm">
				<span>
					{{#if (expr '===' this 1)}}
						{{localize 'OBSIDIAN.FirstN'}}
					{{else if (expr '===' this 2)}}
						{{localize 'OBSIDIAN.SecondN'}}
					{{else if (expr '===' this 3)}}
						{{localize 'OBSIDIAN.ThirdN'}}
					{{else}}
						{{this}}{{localize 'OBSIDIAN.th'}}
					{{/if}}
				</span>
			</label>
		{{/each}}
	</div>
	<div class="obsidian-form-row obsidian-inline obsidian-align-labels">
		{{#each (range 6 9)}}
			<label class="obsidian-inline">
				<input type="text" name="flags.obsidian.spells.slots.{{this}}"
				       value="{{lookup ../entity.flags.obsidian.spells.slots this}}"
				       class="obsidian-input-compact obsidian-input-num obsidian-input-num-sm">
				<span>{{this}}{{localize 'OBSIDIAN.th'}}</span>
			</label>
		{{/each}}
		<label class="obsidian-inline">
			<input type="text" name="flags.obsidian.spells.slots.pact"
			       value="{{entity.flags.obsidian.spells.slots.pact}}"
			       class="obsidian-input-compact obsidian-input-num obsidian-input-num-sm">
			<span>{{localize 'OBSIDIAN.Pact'}}</span>
		</label>
	</div>
	<div class="obsidian-form-row">
		<label class="obsidian-inline">
			{{localize 'OBSIDIAN.PactSlotLevel'}}
			<select name="flags.obsidian.spells.slots.pactLevel">
				{{#select entity.flags.obsidian.spells.slots.pactLevel}}
					<option value="">&mdash;</option>
					{{#each (range 1 9)}}
						<option value="{{this}}">
							{{#if (expr '===' this 1)}}
								{{localize 'OBSIDIAN.FirstN'}}
							{{else if (expr '===' this 2)}}
								{{localize 'OBSIDIAN.SecondN'}}
							{{else if (expr '===' this 3)}}
								{{localize 'OBSIDIAN.ThirdN'}}
							{{else}}
								{{this}}{{localize 'OBSIDIAN.th'}}
							{{/if}}
						</option>
					{{/each}}
				{{/select}}
			</select>
		</label>
	</div>
</form>
