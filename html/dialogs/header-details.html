<form class="obsidian" autocomplete="off">
	<label>
		<input name="flags.obsidian.details.gender" type="text"
		       placeholder="{{localize 'OBSIDIAN.Gender'}}"
		       value="{{entity.flags.obsidian.details.gender}}">
	</label>
	<label>
		<input name="data.details.race.value" type="text" value="{{data.details.race.value}}"
		       placeholder="{{localize 'OBSIDIAN.Race'}}">
	</label>
	<label>
		<input name="flags.obsidian.details.subrace" type="text"
		       placeholder="{{localize 'OBSIDIAN.Subrace'}}"
		       value="{{entity.flags.obsidian.details.subrace}}">
	</label>
	<label class="obsidian-inline obsidian-label-lg">
		{{localize 'OBSIDIAN.Classes'}}
		<button type="button" class="obsidian-btn-positive obsidian-add-class obsidian-btn-sm">
			{{localize 'OBSIDIAN.Add'}}
		</button>
	</label>
	{{#each entity.flags.obsidian.classes as |class id|}}
		<div class="obsidian-form-row obsidian-mixed-form-row obsidian-inline" data-item-id="{{id}}">
			<div>
				<select name="flags.obsidian.classes.{{id}}.name">
					{{#select class.name}}
						{{#each ../ObsidianRules.CLASSES}}
							<option value="{{this}}">{{localize (expr '+' 'OBSIDIAN.Class-' this)}}</option>
						{{/each}}
					{{/select}}
				</select>
				<input class="obsidian-input-compact {{#if (expr '!' (expr '===' 'custom' class.name))~}}
						obsidian-hidden
					{{~/if~}}
				" type="text" name="flags.obsidian.classes.{{id}}.custom"
				       placeholder="{{localize 'OBSIDIAN.Class'}}" style="width: 65px;"
				       value="{{class.custom}}">
				<input class="obsidian-input-compact" type="text"
				       placeholder="{{localize 'OBSIDIAN.Subclass'}}"
				       name="flags.obsidian.classes.{{id}}.subclass" value="{{class.subclass}}"
				       style="{{#if (expr '===' 'custom' class.name)}}width: 65px;{{/if}}">
				<input class="obsidian-input-compact obsidian-input-num obsidian-input-num-sm" type="text"
				       name="flags.obsidian.classes.{{id}}.levels" value="{{class.levels}}"
				       data-dtype="Number">
				<select name="flags.obsidian.classes.{{id}}.hd" data-dtype="Number">
					{{#select class.hd}}
						{{#each ../ObsidianRules.HD}}
							<option value="{{this}}">d{{this}}</option>
						{{/each}}
					{{/select}}
				</select>
			</div>
			<button type="button" class="obsidian-btn-negative obsidian-rm-class obsidian-btn-sm">
				{{localize 'OBSIDIAN.Remove'}}
			</button>
		</div>
	{{/each}}
</form>
