<form class="obsidian" autocomplete="off">
	<label class="obsidian-inline obsidian-label-lg">
		{{localize 'OBSIDIAN.CustomFeatures'}}
		<button type="button" class="obsidian-btn-positive obsidian-btn-sm obsidian-add-feature">
			{{localize 'OBSIDIAN.Add'}}
		</button>
	</label>
	{{#each entity.feats as |feat id|}}
		<div class="obsidian-form-row obsidian-mixed-form-row obsidian-inline"
		     data-item-id="{{feat.id}}">
			<div>
				<input type="text" class="obsidian-input-compact" name="{{feat.id}}.name"
				       placeholder="{{localize 'OBSIDIAN.Feature'}}" value="{{feat.name}}">
				<select name="{{feat.id}}.active" class="obsidian-feat-active"
				        data-selector="active.{{id}}">
					{{#select feat.flags.obsidian.active}}
						{{#each ../ObsidianRules.FEAT_ACTIVE}}
							<option value="{{this}}">{{i18n-join 'OBSIDIAN.FeatActive-' this}}</option>
						{{/each}}
					{{/select}}
				</select>
				<select name="{{feat.id}}.action" data-show="active" data-selector-parent="active.{{id}}"
				        class="{{#if (expr '===' 'passive' feat.flags.obsidian.active)}}obsidian-hidden{{/if}}">
					{{#select feat.flags.obsidian.action}}
						{{#each ../ObsidianRules.FEAT_ACTION}}
							<option value="{{this}}">{{i18n-join 'OBSIDIAN.FeatAction-' this}}</option>
						{{/each}}
					{{/select}}
				</select>
			</div>
			<button type="button" class="obsidian-btn-negative obsidian-btn-sm obsidian-rm-feature">
				{{localize 'OBSIDIAN.Remove'}}
			</button>
		</div>
	{{/each}}
</form>
